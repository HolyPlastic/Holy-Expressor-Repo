<!DOCTYPE html>
<html>


 <!-- #region 🔽🔽🔽 LOADING + head 🗿===================================------------------
____________________ -------->  
<head>
  <meta charset="UTF-8" />
  <title>Holy Expressor</title>

  <!-- 🧩 CSS FIRST: ensures styled paint before JS -->
  <link rel="stylesheet" href="css/styles.css" />

<!-- #region 🎨⚙️⚙️ CSS STYLE FUNCTION ===================================------------------>

<script>
(function STYLE_boot(){
  try {
    const theme = localStorage.getItem('he_theme') || 'default';
    document.documentElement.classList.add(`theme-${theme}`);

    // 💡 HEX → RGB
    function hexToRgb(hex) {
      const clean = hex.replace('#', '');
      const bigint = parseInt(clean, 16);
      const r = (bigint >> 16) & 255;
      const g = (bigint >> 8) & 255;
      const b = bigint & 255;
      return { r, g, b };
    }

    // 💡 RGB → HSL
    function rgbToHsl(r, g, b) {
      r /= 255; g /= 255; b /= 255;
      const max = Math.max(r, g, b);
      const min = Math.min(r, g, b);
      let h, s, l = (max + min) / 2;

      if (max === min) {
        h = s = 0; // gray
      } else {
        const d = max - min;
        s = l > 0.5 ? d / (2 - max - min) : d / (max + min);
        switch (max) {
          case r: h = (g - b) / d + (g < b ? 6 : 0); break;
          case g: h = (b - r) / d + 2; break;
          case b: h = (r - g) / d + 4; break;
        }
        h /= 6;
      }

      return {
        h: Math.round(h * 360),
        s: Math.round(s * 100),
        l: Math.round(l * 100)
      };
    }

    // 🧮 Read CSS var, convert, and reassign
    const root = document.documentElement;
    const hex = getComputedStyle(root).getPropertyValue('--G-color-1').trim();
    const { r, g, b } = hexToRgb(hex);
    const { h, s, l } = rgbToHsl(r, g, b);

    // ✅ Preserve existing RGB pipeline (for opacity borders etc.)
    root.style.setProperty('--G-colour-1-RGB', `${r}, ${g}, ${b}`);

    // ✅ Add new HSL variables for CSS-controlled modifiers
    root.style.setProperty('--G-color-1-H', h);
    root.style.setProperty('--G-color-1-S', s + '%');
    root.style.setProperty('--G-color-1-L', l + '%');

  } catch (e) {
    console.warn('cy_styleBoot failed', e);
  }
})();
</script>
<!----_-_-_-_-_-_-_---------------------------------------\--\--->
<!-- #endregion ^^^ end🎨⚙️⚙️ ^^^ -->


  

  <!-- ⚙️ Core CEP dependencies (MUST stay synchronous) -->
  <script src="js/libs/CSInterface.js"></script>
  <script src="js/json2.js"></script>

  <!-- 🧠 Core editor bundle (CodeMirror) -->
  <script defer src="js/codemirror/codemirror-bundle.js"></script>
<!-- 💡 CM bundle is loaded above -->
<link rel="stylesheet" href="css/codemirror_styles.css"> <!-- uses globals from styles.css -->
  <!-- 🧩 Plugin modules (safe to defer) -->
  <script defer src="js/main_UTILS.js"></script>
  <script defer src="js/main_FLYO.js"></script>
  <script defer src="js/main_MENU.js"></script>
  <script defer src="js/main_UI.js"></script>
  <script defer src="js/main_EXPRESS.js"></script>
  <script defer src="js/main_BUTTON_LOGIC_1.js"></script>
  <script defer src="js/main_SNIPPETS.js"></script>
  <script defer src="js/main_DEV_INIT.js"></script>

  <!-- 🚀 Final entrypoint -->
  <script defer src="js/main.js"></script>
</head>



<body>

  <div id="appRoot">
  
  <header class="hdr">
    <h2></h2>
  </header>



  <section class="tabs">
   
 <!-- V1 — Flyover Trigger Button -->

	<button class="tab-btn" id="reloadPanel">Reload</button>
  <button  class="tab-btn" id="exposeBtn">Expose</button>
  <button id="flyoTest">Open Flyover Test</button>
  

  </section>

<!----_-_-_-_-_-_-_---------------------------------------\--\--->
<!-- #endregion ^^^ EnndLoading 🔽 + head 🗿 ^^^ -->



<!-- #region ✂️✂️✂️ SNIPPETS ===================================------------------
____________________ -------->

  <!-- ============================ 
       ✂️✂️✂️✂️SNIPPETS
       ============================ -->


<!-- V1: Snippets Bar (single button) -->
<div id="snippetsBar" class="panel">



<!-- 🟧 Bank Header Compact + Dropdown Icon -->
<div id="bankHeader" class=>
  <span class="heading-1 f18-c">Snippets </span>
  <!-- Dropdown button (icon version) -->
  <button id="bankSelectBtn" class="Dd-blank" title="Select Bank">
    <svg class="dropdown-icon" xmlns="http://www.w3.org/2000/svg"
         width="6" height="6" viewBox="0 0 5.63 5.63">
      <path d="M1.13.5h3.38c.46,0,.77.49.56.9l-1.69,3.38c-.23.46-.89.46-1.12,0L.57,1.4c-.21-.42.09-.9.56-.9Z"/>
    </svg>
  </button>

  <!-- Bank name (editable text) -->
  <span id="bankNameLabel" class="f18-c">Bank 1</span>



  <!-- Context menu for bank actions -->
  <ul id="bankSelectMenu" class="context-menu"></ul>
</div>


  <div class="snippetsRow" id="snippetsRow"></div>
</div>

<!-- Context menu for snippet buttons -->
<ul id="snippetContextMenu" class="context-menu snippet-menu">
  <li><button data-action="edit">Edit</button></li>
  <li><button data-action="express">Express...</button></li>
</ul>

<!----_-_-_-_-_-_-_---------------------------------------\--\--->
<!-- #endregion ^^^ End Snippets ✂️ ^^^ -->



  <!-- ============================
       Defunct tab section??-->
  <section id="expressions" class="tab active">

  </section>

<!-- #region 🖥️🖥️🖥️ EXPRESS ===================================------------------
____________________ -------->


<!-- Express panel -->
<div id="expressArea" class="panel">
  <span class="heading-1 f18">Express</span>
  <!-- V2: pick UI removed -->
  <!-- Editor row -->
  <div id="codeEditor"></div>
</div>

<!----_-_-_-_-_-_-_---------------------------------------\--\--->
<!-- #endregion ^^^ End Express 🖥️ ^^^ -->


<!-- #region 🎛️🎛️🎛️ Express CONTROLS ===================================------------------
____________________ -------->


  <!-- =============== Main button Row ==============-->
	<!-- =======================[+]=====================-->
	
	
    <div class="row btns">
<!--
  Target Selected button 
<div class="target-btn-wrapper">
  <button id="targetSelectedBtn" class="circle-btn"></button>
  <div class="label-under">Target<br>Selected</div>
</div>



<div class="target-btn-wrapper">
  <button id="targetSelectedBtn" class="circle-btn"></button>
  <div class="label-under">Target<br>Selected</div>
</div>

-->

<div>
  <button id="loadFromSelectionBtn" class="circle-btn"></button>
  <div class="label-under">Load<br>Expression</div>
</div>

<div>
  <button id="loadPathFromSelectionBtn" class="circle-btn f3"></button>
  <div class="label-under">Load<br>Path</div>
</div>


  <!-- ============ Absolute vs Relative ☑️ ==============-->
	<!-- ======================[___?]=====================-->

</div>
    
<label class="checkbox-label text-sm"><input type="checkbox" id="useAbsoluteComp"> Use comp name instead of thisComp</label>


    <!-- ============ Custom Name Searching ☑️==============-->
	<!-- ======================[___?]=====================-->

    <!-- Custom Search controls -->
    <div class="row">
      <label class="checkbox-label text-sm">
  <input type="checkbox" id="useCustomSearch" /> Custom search
</label>
    </div>
    <div class="row">
      <input type="text" id="customSearch" placeholder="e.g. Stroke 1 > Opacity" disabled />
    </div>

<!----_-_-_-_-_-_-_---------------------------------------\--\--->
<!-- #endregion ^^^ End Controls ^^^ -->


<!-- #region 🔵🔵🔵 APPLY ===================================------------------
____________________ -------->


    <!-- Apply buttons -->
    <div class="row btns apply-row">
  


<!-- 🟧🟧🟧 Rhombus Button -->
<!-- 🟧 Unified rhombus button -->
<button id="applyBtn" class="btn-rhombus f18-c holy-glow">
  <svg class="rhombus-icon"
       xmlns="http://www.w3.org/2000/svg"
       width="63.25" height="20.08"
       viewBox="-0.75 -0.75 63.25 20.08">

    <!-- Left section -->
    <g class="rhombus-left">
      <path d="M7.47.5h-3.69C1.54.5-.04,2.69.67,4.82l3.69,11.02c.45,1.34,1.7,2.24,3.11,2.24" />
    </g>

    <!-- Middle section -->
    <g class="rhombus-mid">
      <rect x="7.47" y="0.5" width="46.8" height="18.08"
            fill="currentColor" stroke="none" />
      <line x1="7.47" y1="0.5"  x2="54.27" y2="0.5" />
      <line x1="7.47" y1="18.08" x2="54.27" y2="18.08" />
    </g>

    <!-- Right section -->
    <g class="rhombus-right">
      <path d="M54.27,18.08h3.69c2.24,0,3.82-2.19,3.11-4.32L57.38,2.74C56.93,1.4,55.68.5,54.27.5" />
    </g>
  </svg>

  <span class="label">APPLY</span>
</button>

      <!--<button id="applyTargetBtn" class="apply-target-btn">Apply</button>-->
    </div>

  <!-- ================ Romby boi ==============-->
	<!-- =======================[+]=====================-->


    
<!----_-_-_-_-_-_-_---------------------------------------\--\--->
<!-- #endregion ^^^ End Apply 🔵 ^^^ -->


<!-- #region ⚪⚪⚪ MISC ===================================------------------
____________________ -------->




    <!-- Apply Report toggle + box -->
    <div class="row">
      <label class="checkbox-label text-sm">
  <input type="checkbox" id="toggleReport" />
  Show detailed Apply Report
</label>

    </div>
    <div id="applyReportContainer" style="display:none;">
      <h4>Apply Report</h4>
      <pre id="applyReport">No report yet</pre>
    </div>









<!-- Target box
    <div id="TargetBox" class="panel shade-hard">
      <div id="TargetList">No results yet</div>
    </div>
 -->
  <!-- Toast -->
  <footer id="toast"></footer>
  


    <!-- V2: pick UI removed -->


 <!----_-_-_-_-_-_-_---------------------------------------\--\--->
<!-- #endregion ^^^ End Misc ⚪ ^^^ -->





 </div> <!-- end appRoot --> 


 <script>
  document.addEventListener('DOMContentLoaded', () => {
    console.log('Holy Expressor Base Path →', window.location.href);
  });
</script>

</body>

</html>
